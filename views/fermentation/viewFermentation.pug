extends ../layout

block content


	h1 !{fermentation.name}


	if (fermentation.description)
		p.description !{fermentation.description}
	
	article
		h2 Fermentation Thermal Profile

		.graph-container

	if (fermentation.recipe.malt || fermentation.recipe.hops || fermentation.recipe.yeast) 
		article
			h2 Recipe

	- const temperatureLog = fermentation.dataLog.thermalProfile.actual;
	if (temperatureLog.length > 0) 
		article
			h2 Temperature
			p Last logged temperature: #{temperatureLog[temperatureLog.length - 1].temp}Â°C
	
	article 
		h2 Specific Gravity
		
		table
			thead
				tr
					th 
					th Original Gravity
					th Final Gravity
			tbody
				tr
					td Target
					td #{fermentation.targetOG}
					td #{fermentation.targetFG}
				tr
					td Actual
					td #{fermentation.actualOG}
					td #{fermentation.actualFG}


	if (fermentation.assignedDevice) 
		article
			h2 Device
			p Device !{fermentation.assignedDevice.name} is assigned to !{fermentation.name}.

	a(href=`/fermentation/${fermentation._id}/edit`) Edit fermentation details.
	//- script(src="https://d3js.org/d3.v6.min.js")
	//- include clientScripts/drawGraph.js
	